"use strict";(self.webpackChunknotes_organizer=self.webpackChunknotes_organizer||[]).push([[409],{3811:(e,t,a)=>{a.d(t,{p:()=>o});var s=a(6178),r=a.n(s);const o=e=>{var t;const a=null===(t=e.searchByPhrase)||void 0===t?void 0:t.toLowerCase(),s=localStorage.getItem("notes-organizer_tasks"),o=r()();if(s){const t=JSON.parse(s).filter((t=>!(e.searchByDate&&!((e,t,a)=>{const s=r()(e,"DD.MM.YYYY",!0),o=r()(t,"DD.MM.YYYY",!0),n=r()(a,"DD.MM.YYYY",!0);return s.isBetween(o,n,null,"[]")})(e.searchByDate,t.dateFrom,t.dateTo))&&((!e.searchByPart||t.part===e.searchByPart)&&(!(a&&!(t.subject.toLowerCase().includes(a)||t.additionalInfo&&t.additionalInfo.toLowerCase().includes(a)))&&(("\u0422\u0435\u0440\u043c\u0456\u043d \u0437\u0430\u043a\u0456\u043d\u0447\u0438\u0432\u0441\u044f"!==e.searchByStatus||!r()(o,"DD.MM.YYYY",!0).isBefore(r()(t.dateTo,"DD.MM.YYYY",!0)))&&("\u0412\u0438\u043a\u043e\u043d\u0443\u0454\u0442\u044c\u0441\u044f"!==e.searchByStatus||!r()(o,"DD.MM.YYYY",!0).isAfter(r()(t.dateTo,"DD.MM.YYYY",!0))))))));return t.length>0?t:[]}}},7466:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var s=a(9379),r=a(5043),o=a(9456),n=a(4858),l=a(5237),d=a(6178),i=a.n(d),c=a(9945),x=a(3811),u=a(4656),h=a(2667),m=a(8979),j=a(3503),f=a(5277),_=a(895),C=a(9610),v=a(7981),g=a(9162),b=a(1487),A=a(7629),p=a(629),Y=a(6600),T=a(5320),M=a(1934),y=a(5369),w=a(7929),D=a(3910);const S={todoPart:"CreateTodo_todoPart__M-oVy",textarea:"CreateTodo_textarea__tkAlx",scroll:"CreateTodo_scroll__4Mlw0",addUserGroup:"CreateTodo_addUserGroup__o615u",addUser:"CreateTodo_addUser__KGkLd",modal:"CreateTodo_modal__eEXkl",modalBorder:"CreateTodo_modalBorder__e8VLb",dismissButton:"CreateTodo_dismissButton__Z0cPA",userListShow:"CreateTodo_userListShow__mST2H",form:"CreateTodo_form__Smlhi",preview:"CreateTodo_preview__Hm0uN",previewInMobile:"CreateTodo_previewInMobile__3u08V",checkbox:"CreateTodo_checkbox__FY4EB",checkboxDiv:"CreateTodo_checkboxDiv__jW9ib",wrap:"CreateTodo_wrap__Fc8nQ",btnPart:"CreateTodo_btnPart__Tfiw4",btnReturn:"CreateTodo_btnReturn__uVadC"};var k=a(579);const N=()=>{const e=(0,c.j)(),t=(0,o.d4)(h.S0),a=(0,o.d4)(f.xY),d=(0,o.d4)(f.Td),N=(0,o.d4)(m.UU),I=(0,o.d4)(m.TV),[B,F]=(0,r.useState)(!1),[P,L]=(0,r.useState)([]),[U,z]=(0,r.useState)(i()()),[R,q]=(0,r.useState)(i()()),G={additionalInfo:"",dateFrom:"",dateTo:"",otherMembers:"",part:"",subject:"",saveAfterDeadline:!1},[O,V]=(0,r.useState)(G),[E,J]=(0,r.useState)(!1),[H,Q]=(0,r.useState)([]),W=(0,l.useMediaQuery)({maxWidth:767});(0,r.useEffect)((()=>{(async()=>{if(t){const t={searchByStatus:""},a=(0,x.p)(t);a&&a.length>0&&(Q(a),await e((0,j.nR)(!0)),await e((0,j.B0)("You have tasks saved locally on your computer, would you like to synchronize them with the server?")))}})()}),[t,e]),(0,r.useEffect)((()=>{P.length>0&&K("otherMembers",P.join(", ")),0===P.length&&K("otherMembers","")}),[P]);const K=(e,t)=>{if("dateFrom"===e){const a=i()(t,"DD.MM.YYYY");z(a),V((a=>(0,s.A)((0,s.A)({},a),{},{[e]:t})))}if("dateTo"===e){const a=i()(t,"DD.MM.YYYY");q(a),V((a=>(0,s.A)((0,s.A)({},a),{},{[e]:t})))}V("part"===e?a=>(0,s.A)((0,s.A)({},a),{},{[e]:t.value}):a=>(0,s.A)((0,s.A)({},a),{},{[e]:t}))},{control:X,handleSubmit:Z,reset:$}=(0,n.mN)({defaultValues:{part:{value:"",label:""},subject:"",dateFrom:"",dateTo:"",additionalInfo:"",saveAfterDeadline:!1}});const ee=()=>{F(!B)},te=()=>{J(!E)};return(0,k.jsx)("section",{className:S.createTodo,children:(0,k.jsxs)(_.A,{children:[(0,k.jsxs)("div",{className:S.todoPart,children:[(0,k.jsxs)("form",{className:S.form,onSubmit:Z((async a=>{const r={part:a.part.value,subject:a.subject,dateFrom:a.dateFrom,dateTo:a.dateTo,additionalInfo:a.additionalInfo,otherMembers:O.otherMembers,saveAfterDeadline:a.saveAfterDeadline};if(t)await e((0,u.py)(r));else{const t=JSON.parse(localStorage.getItem("notes-organizer_tasks")||"[]");t.push((0,s.A)((0,s.A)({},r),{},{_id:((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}))})),localStorage.setItem("notes-organizer_tasks",JSON.stringify(t)),e((0,j.B0)("Todo added successfully"))}$(),F(!1),L([]),z(i()()),q(i()()),V(G)})),children:[(0,k.jsx)(b.A,{text:"\u0420\u043e\u0437\u0434\u0456\u043b",textClass:"title-form"}),(0,k.jsx)(n.xI,{control:X,name:"part",rules:{required:!0},render:e=>{let{field:{onChange:t,value:a},fieldState:s}=e;return(0,k.jsx)(v.A,{value:a,handleChange:e=>{t(e),K("part",e)},name:"part",className:"createTodo",placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043e\u043f\u0446\u0456\u044e",required:!0,options:d})}}),(0,k.jsx)(b.A,{text:"\u0422\u0435\u043c\u0430",textClass:"title-form"}),(0,k.jsx)(n.xI,{control:X,name:"subject",rules:{required:!0},render:e=>{let{field:{onChange:t,value:a},fieldState:r}=e;return(0,k.jsx)(A.A,(0,s.A)({value:a,control:X,className:"createTodo",handleChange:e=>{const a=e.target.value;t(a),K("subject",a)},error:r.error},M.O.subject))}}),(0,k.jsx)(b.A,{text:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0447\u0430\u0442\u043a\u0443",textClass:"title-form"}),(0,k.jsx)(n.xI,{control:X,name:"dateFrom",rules:{required:!0},render:e=>{let{field:{onChange:t}}=e;return(0,k.jsx)(C.A,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:U.toDate(),handleChange:e=>{t(e),K("dateFrom",e)}})}}),(0,k.jsx)(b.A,{text:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f",textClass:"title-form"}),(0,k.jsx)(n.xI,{control:X,name:"dateTo",rules:{required:!0},render:e=>{let{field:{onChange:t}}=e;return(0,k.jsx)(C.A,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:R.toDate(),handleChange:e=>{t(e),K("dateTo",e)}})}}),(0,k.jsx)(b.A,{text:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",textClass:"title-form"}),(0,k.jsx)(n.xI,{control:X,name:"additionalInfo",rules:{required:!1},render:e=>{let{field:{onChange:t,value:a},fieldState:s}=e;return(0,k.jsx)("textarea",{className:"".concat(S.textarea," ").concat(S.scroll),value:a,onChange:e=>{t(e.target.value),K("additionalInfo",e.target.value)},rows:3,cols:40})}}),t&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(b.A,{text:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u0437 \u044f\u043a\u0438\u043c \u0432\u0438 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c",textClass:"title-form"}),(0,k.jsx)("div",{className:S.userListShow,children:(0,k.jsx)(b.A,{text:P.join(", "),textClass:"hidenInputCreateTodo"})}),(0,k.jsxs)("div",{className:S.addUserGroup,children:[(0,k.jsx)("div",{className:S.addUser,onClick:ee,children:(0,k.jsx)(y.OiG,{size:20,color:"white"})}),(0,k.jsx)(b.A,{text:B?"\u041e\u0431\u0440\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432",textClass:"title-form-add-user"})]}),B&&(0,k.jsx)("div",{className:S.modal,children:(0,k.jsxs)("div",{className:S.modalBorder,children:[(0,k.jsx)("button",{className:S.dismissButton,onClick:ee,children:(0,k.jsx)(D.g,{icon:w.GRI,size:"lg",color:"white"})}),(0,k.jsx)(p.A,{arrayUser:a,selectedUsers:P,setSelectedUsers:L})]})})]}),(0,k.jsx)(b.A,{text:"\u0417\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u043f\u0456\u0441\u043b\u044f \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0440\u043c\u0456\u043d\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f",textClass:"title-form"}),(0,k.jsx)(n.xI,{control:X,name:"saveAfterDeadline",render:e=>{let{field:{onChange:t,value:a}}=e;return(0,k.jsx)("div",{className:S.checkboxDiv,children:(0,k.jsx)("input",{type:"checkbox",className:S.checkbox,checked:a,onChange:e=>{t(e.target.checked),K("saveAfterDeadline",e.target.checked)}})})}}),(0,k.jsxs)("div",{className:S.btnPart,children:[(0,k.jsx)("div",{className:S.wrap,children:(0,k.jsx)(g.A,{text:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",btnClass:"btnLight"})}),W&&(0,k.jsx)("div",{className:S.wrap,children:(0,k.jsx)(g.A,{text:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",btnClass:"btnLight",handleClick:te,type:"button"})})]})]}),!W&&(0,k.jsx)("div",{className:S.preview,children:(0,k.jsx)(Y.A,(0,s.A)({},O))}),W&&E&&(0,k.jsxs)("div",{className:S.previewInMobile,children:[(0,k.jsx)(Y.A,(0,s.A)({},O)),(0,k.jsx)("div",{className:S.btnReturn,children:(0,k.jsx)(g.A,{text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f",btnClass:"btnLight",handleClick:te,type:"button"})})]})]}),N&&(0,k.jsx)(T.A,{text:"".concat(N),onDismiss:()=>{if(!I){const t=setTimeout((()=>{e((0,j.R)())}),1e4);return()=>clearTimeout(t)}},onChoice:async t=>{if(!0===t){const t=await e((0,u.TR)(H));t&&"fulfilled"===t.meta.requestStatus&&(localStorage.setItem("notes-organizer_tasks",JSON.stringify([])),Q([]))}else e((0,j.R)()),e((0,j.nR)(!1))},type:"todo"})]})})},I=()=>(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(N,{})})}}]);
//# sourceMappingURL=409.fb905c93.chunk.js.map