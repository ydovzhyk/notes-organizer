"use strict";(self.webpackChunknotes_organizer=self.webpackChunknotes_organizer||[]).push([[917],{6420:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var a=r(9434),n=r(7689),o=r(8373),s=r(1351),i=r(4165),d=r(5861),l=r(4942),c=r(1413),u=r(9439),x=r(2791),f=r(1134),h=r(2426),m=r.n(h),v=r(1313),j=r(4805),_=r(5365),b=r(5725),Z=r(8149),p=r(7724),T=r(3450),g=r(4657),C=r(5347),k=r(2435),w=r(1716),M=r(7787),N=r(6267),E=r(4989),D=r(8110),S=r(6355),y=r(1632),I=r(9806),Y={editTodo:"EditTodo_editTodo__AXezh",todoPart:"EditTodo_todoPart__mI6Cn",textarea:"EditTodo_textarea__AvvZ0",scroll:"EditTodo_scroll__Gc7OP",addUserGroup:"EditTodo_addUserGroup__wBn+W",addUser:"EditTodo_addUser__a3Cq3",modal:"EditTodo_modal__VUhBN",modalBorder:"EditTodo_modalBorder__TklCT",dismissButton:"EditTodo_dismissButton__dXz+4",userListShow:"EditTodo_userListShow__41-p2",edit:"EditTodo_edit__6cZZD",preview:"EditTodo_preview__4Vha-",checkbox:"EditTodo_checkbox__g7fe+",checkboxDiv:"EditTodo_checkboxDiv__aJLli",wrap:"EditTodo_wrap__IYppw",btnPart:"EditTodo_btnPart__qNEVo",btnReturn:"EditTodo_btnReturn__aOV6E",previewInMobile:"EditTodo_previewInMobile__umgSh"},F=r(3329),A=function(e){var t=e.todoData,r=window.innerHeight,h=(0,x.useState)({}),A=(0,u.Z)(h,2),U=A[0],B=A[1],P=(0,x.useState)(!1),q=(0,u.Z)(P,2),z=q[0],Q=q[1],L=(0,j.useMediaQuery)({maxWidth:767}),G=null!==t&&void 0!==t&&t.otherMembers?[t.otherMembers]:[],V=null!==t&&void 0!==t&&t.additionalInfo?t.additionalInfo:"",O=null!==t&&void 0!==t&&t.dateFrom?t.dateFrom:"",H=null!==t&&void 0!==t&&t.dateTo?t.dateTo:"",J=null!==t&&void 0!==t&&t.otherMembers?t.otherMembers:"",R=null!==t&&void 0!==t&&t.part?t.part:"",W=null!==t&&void 0!==t&&t.subject?t.subject:"",X=!(null===t||void 0===t||!t.saveAfterDeadline)&&t.saveAfterDeadline,K=null!==t&&void 0!==t&&t._id?t._id:"",$=(0,v.T)(),ee=(0,n.s0)(),te=(0,a.v9)(o.t2),re=(0,a.v9)(p.x0),ae=(0,a.v9)(p.G8),ne=(0,a.v9)(b.es),oe=(0,x.useState)(!1),se=(0,u.Z)(oe,2),ie=se[0],de=se[1],le=(0,x.useState)(G),ce=(0,u.Z)(le,2),ue=ce[0],xe=ce[1],fe="DD.MM.YYYY",he=(0,x.useState)(m()(O,fe)),me=(0,u.Z)(he,2),ve=me[0],je=me[1],_e=(0,x.useState)(m()(H,fe)),be=(0,u.Z)(_e,2),Ze=be[0],pe=be[1],Te={additionalInfo:V,dateFrom:O,dateTo:H,otherMembers:J,part:R,subject:W,saveAfterDeadline:X},ge=(0,x.useState)(Te),Ce=(0,u.Z)(ge,2),ke=Ce[0],we=Ce[1];(0,x.useEffect)((function(){B({height:"".concat(te?r-64:r-64-39,"px")})}),[te,r]),(0,x.useEffect)((function(){t&&Object.keys(t).length||ee("/")}),[t,ee]),(0,x.useEffect)((function(){ue.length>0&&Me("otherMembers",ue.join(", ")),0===ue.length&&Me("otherMembers","")}),[ue]);var Me=function(e,t){if("dateFrom"===e){var r=m()(t,"DD.MM.YYYY");je(r),we((function(r){return(0,c.Z)((0,c.Z)({},r),{},(0,l.Z)({},e,t))}))}if("dateTo"===e){var a=m()(t,"DD.MM.YYYY");pe(a),we((function(r){return(0,c.Z)((0,c.Z)({},r),{},(0,l.Z)({},e,t))}))}we("part"===e?function(r){return(0,c.Z)((0,c.Z)({},r),{},(0,l.Z)({},e,t.value))}:function(r){return(0,c.Z)((0,c.Z)({},r),{},(0,l.Z)({},e,t))})},Ne=(0,f.cI)({defaultValues:{additionalInfo:V,dateFrom:O,dateTo:H,otherMembers:J,part:{value:R,label:R},subject:W,saveAfterDeadline:X}}),Ee=Ne.control,De=Ne.handleSubmit,Se=Ne.reset,ye=function(){var e=(0,d.Z)((0,i.Z)().mark((function e(r){var a,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={part:r.part.value,subject:r.subject,dateFrom:r.dateFrom,dateTo:r.dateTo,additionalInfo:r.additionalInfo,otherMembers:ke.otherMembers,saveAfterDeadline:r.saveAfterDeadline,_id:t._id},te){e.next=13;break}if(n=JSON.parse(localStorage.getItem("notes-organizer_tasks")||"[]"),-1===(o=n.findIndex((function(e){return e._id===K})))){e.next=10;break}n[o]=(0,c.Z)((0,c.Z)({},n[o]),a),localStorage.setItem("notes-organizer_tasks",JSON.stringify(n)),$((0,Z.Ql)("Todo edited successfully")),e.next=11;break;case 10:return e.abrupt("return");case 11:e.next=15;break;case 13:return e.next=15,$((0,_.bm)(a));case 15:Se(),de(!1),xe([]),je(m()()),pe(m()()),we(Te),Ye();case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){de(!ie)},Ye=function(){var e=setTimeout((function(){ee("/list")}),1e4);return function(){return clearTimeout(e)}},Fe=function(){Q(!z)};return(0,F.jsx)("section",{className:Y.editTodo,style:U,children:(0,F.jsxs)(T.Z,{children:[(0,F.jsxs)("div",{className:Y.todoPart,children:[(0,F.jsx)("div",{className:Y.edit,children:(0,F.jsxs)("form",{className:Y.form,onSubmit:De(ye),children:[(0,F.jsx)(s.Z,{text:"\u0420\u043e\u0437\u0434\u0456\u043b",textClass:"title-form"}),(0,F.jsx)(f.Qr,{control:Ee,name:"part",rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,a=t.value;e.fieldState;return(0,F.jsx)(C.Z,{value:a,handleChange:function(e){r(e),Me("part",e)},name:"part",className:"createTodo",placeholder:R,required:!0,options:ae,defaultValue:{value:R,label:R}})}}),(0,F.jsx)(s.Z,{text:"\u0422\u0435\u043c\u0430",textClass:"title-form"}),(0,F.jsx)(f.Qr,{control:Ee,name:"subject",rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,a=t.value,n=e.fieldState;return(0,F.jsx)(w.Z,(0,c.Z)({value:a,control:Ee,className:"createTodo",handleChange:function(e){var t=e.target.value;r(t),Me("subject",t)},error:n.error},D.X.subject))}}),(0,F.jsx)(s.Z,{text:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0447\u0430\u0442\u043a\u0443",textClass:"title-form"}),(0,F.jsx)(f.Qr,{control:Ee,name:"dateFrom",rules:{required:!0},render:function(e){var t=e.field.onChange;return(0,F.jsx)(g.Z,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:ve.toDate(),handleChange:function(e){t(e),Me("dateFrom",e)}})}}),(0,F.jsx)(s.Z,{text:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f",textClass:"title-form"}),(0,F.jsx)(f.Qr,{control:Ee,name:"dateTo",rules:{required:!0},render:function(e){var t=e.field.onChange;return(0,F.jsx)(g.Z,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:Ze.toDate(),handleChange:function(e){t(e),Me("dateTo",e)}})}}),(0,F.jsx)(s.Z,{text:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",textClass:"title-form"}),(0,F.jsx)(f.Qr,{control:Ee,name:"additionalInfo",rules:{required:!1},render:function(e){var t=e.field,r=t.onChange,a=t.value;e.fieldState;return(0,F.jsx)("textarea",{className:"".concat(Y.textarea," ").concat(Y.scroll),value:a,onChange:function(e){r(e.target.value),Me("additionalInfo",e.target.value)},rows:3,cols:40})}}),te&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(s.Z,{text:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u0437 \u044f\u043a\u0438\u043c \u0432\u0438 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c",textClass:"title-form"}),(0,F.jsx)("div",{className:Y.userListShow,children:(0,F.jsx)(s.Z,{text:ue.join(", "),textClass:"hidenInputCreateTodo"})}),(0,F.jsxs)("div",{className:Y.addUserGroup,children:[(0,F.jsx)("div",{className:Y.addUser,onClick:Ie,children:(0,F.jsx)(S.wEH,{size:20,color:"white"})}),(0,F.jsx)(s.Z,{text:ie?"\u041e\u0431\u0440\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432",textClass:"title-form-add-user"})]}),ie&&(0,F.jsx)("div",{className:Y.modal,children:(0,F.jsxs)("div",{className:Y.modalBorder,children:[(0,F.jsx)("button",{className:Y.dismissButton,onClick:Ie,children:(0,F.jsx)(I.G,{icon:y.NBC,size:"lg",color:"white"})}),(0,F.jsx)(M.Z,{arrayUser:re,selectedUsers:ue,setSelectedUsers:xe})]})})]}),(0,F.jsx)(s.Z,{text:"\u0417\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u043f\u0456\u0441\u043b\u044f \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0440\u043c\u0456\u043d\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f",textClass:"title-form"}),(0,F.jsx)(f.Qr,{control:Ee,name:"saveAfterDeadline",render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,F.jsx)("div",{children:(0,F.jsx)("input",{type:"checkbox",className:Y.checkbox,checked:a,onChange:function(e){r(e.target.checked),Me("saveAfterDeadline",e.target.checked)}})})}}),(0,F.jsxs)("div",{className:Y.btnPart,children:[(0,F.jsx)("div",{className:Y.wrap,children:(0,F.jsx)(k.Z,{text:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438",btnClass:"btnLight"})}),L&&(0,F.jsx)("div",{className:Y.wrap,children:(0,F.jsx)(k.Z,{text:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",btnClass:"btnLight",handleClick:Fe,type:"button"})})]})]})}),!L&&(0,F.jsx)("div",{className:Y.preview,children:(0,F.jsx)(N.Z,(0,c.Z)({},ke))}),L&&z&&(0,F.jsxs)("div",{className:Y.previewInMobile,children:[(0,F.jsx)(N.Z,(0,c.Z)({},ke)),(0,F.jsx)("div",{className:Y.btnReturn,children:(0,F.jsx)(k.Z,{text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f",btnClass:"btnLight",handleClick:Fe,type:"button"})})]})]}),ne&&(0,F.jsx)(E.Z,{text:"".concat(ne),onDismiss:function(){var e=setTimeout((function(){$((0,Z.Wv)())}),1e4);return function(){return clearTimeout(e)}},type:"todo"})]})})},U=function(){var e=(0,a.v9)(o.t2),t=(0,n.TH)().state;return(0,F.jsxs)(F.Fragment,{children:[!e&&(0,F.jsx)(s.Z,{text:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0449\u043e\u0431 \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u0432\u0430\u0448\u0438\u0445 \u0437\u0430\u0432\u0434\u0430\u043d\u044c \u043d\u0430 \u0440\u0456\u0437\u043d\u0438\u0445 \u043f\u0440\u0438\u0441\u0442\u0440\u043e\u044f\u0445",textClass:"catalogTitle"}),(0,F.jsx)(A,{todoData:t})]})}}}]);
//# sourceMappingURL=917.b50f05a9.chunk.js.map