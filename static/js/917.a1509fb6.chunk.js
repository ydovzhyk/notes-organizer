"use strict";(self.webpackChunknotes_organizer=self.webpackChunknotes_organizer||[]).push([[917],{6420:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var r=a(9434),n=a(7689),o=a(8373),s=a(1351),i=a(4942),d=a(4165),l=a(1413),c=a(5861),u=a(9439),f=a(2791),x=a(1134),h=a(2426),m=a.n(h),v=a(1313),j=a(4805),b=a(5365),_=a(5725),p=a(8149),Z=a(7724),T=a(3450),g=a(4657),C=a(5347),k=a(2435),M=a(1716),w=a(7787),D=a(6267),N=a(4989),E=a(8110),S=a(6355),y=a(1632),I=a(9806),Y={editTodo:"EditTodo_editTodo__AXezh",todoPart:"EditTodo_todoPart__mI6Cn",textarea:"EditTodo_textarea__AvvZ0",scroll:"EditTodo_scroll__Gc7OP",addUserGroup:"EditTodo_addUserGroup__wBn+W",addUser:"EditTodo_addUser__a3Cq3",modal:"EditTodo_modal__VUhBN",modalBorder:"EditTodo_modalBorder__TklCT",dismissButton:"EditTodo_dismissButton__dXz+4",userListShow:"EditTodo_userListShow__41-p2",edit:"EditTodo_edit__6cZZD",preview:"EditTodo_preview__4Vha-",checkbox:"EditTodo_checkbox__g7fe+",checkboxDiv:"EditTodo_checkboxDiv__aJLli",wrap:"EditTodo_wrap__IYppw",btnPart:"EditTodo_btnPart__qNEVo",btnReturn:"EditTodo_btnReturn__aOV6E",previewInMobile:"EditTodo_previewInMobile__umgSh"},F=a(3329),A=function(e){var t=e.todoData,a=(0,n.UO)().id,h="DD.MM.YYYY",A=m()().format("DD.MM.YYYY"),U=window.innerHeight,z=(0,f.useState)({}),B=(0,u.Z)(z,2),O=B[0],P=B[1],q=(0,f.useState)(!1),L=(0,u.Z)(q,2),Q=L[0],G=L[1],V=(0,j.useMediaQuery)({maxWidth:767}),J=(0,f.useState)(""),H=(0,u.Z)(J,2),R=H[0],W=H[1],X=(0,f.useState)(""),K=(0,u.Z)(X,2),$=K[0],ee=K[1],te={additionalInfo:"",dateFrom:A,dateTo:A,otherMembers:"",part:"",subject:"",saveAfterDeadline:!1},ae=(0,v.T)(),re=(0,n.s0)(),ne=(0,r.v9)(o.t2),oe=(0,r.v9)(_.aY),se=(0,r.v9)(Z.x0),ie=(0,r.v9)(Z.G8),de=(0,r.v9)(_.es),le=(0,f.useState)(!1),ce=(0,u.Z)(le,2),ue=ce[0],fe=ce[1],xe=(0,f.useState)([]),he=(0,u.Z)(xe,2),me=he[0],ve=he[1],je=(0,f.useState)(m()(A,h)),be=(0,u.Z)(je,2),_e=be[0],pe=be[1],Ze=(0,f.useState)(m()(A,h)),Te=(0,u.Z)(Ze,2),ge=Te[0],Ce=Te[1],ke=(0,f.useState)(te),Me=(0,u.Z)(ke,2),we=Me[0],De=Me[1],Ne=(0,x.cI)({defaultValues:{additionalInfo:we.additionalInfo,dateFrom:we.dateFrom,dateTo:we.dateTo,otherMembers:we.otherMembers,part:{value:we.part,label:we.part},subject:we.subject,saveAfterDeadline:we.saveAfterDeadline}}),Ee=Ne.control,Se=Ne.handleSubmit,ye=Ne.reset;(0,f.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,d.Z)().mark((function e(t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De((0,l.Z)({},t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t&&Object.keys(t).length>0&&(e(t),ye({additionalInfo:t.additionalInfo,dateFrom:t.dateFrom,dateTo:t.dateTo,otherMembers:t.otherMembers,part:{value:t.part,label:t.part},subject:t.subject,saveAfterDeadline:t.saveAfterDeadline}),pe(m()(t.dateFrom,h)),Ce(m()(t.dateTo,h)),ve([t.otherMembers]),W(t.part),ee(t._id)),!t&&oe&&Object.keys(oe).length>0&&(e(oe),"_id"in oe&&(ye({additionalInfo:oe.additionalInfo,dateFrom:oe.dateFrom,dateTo:oe.dateTo,otherMembers:oe.otherMembers,part:{value:oe.part,label:oe.part},subject:oe.subject,saveAfterDeadline:oe.saveAfterDeadline}),pe(m()(oe.dateFrom,h)),Ce(m()(oe.dateTo,h)),ve([oe.otherMembers]),ee(oe._id),W(oe.part)))}),[oe,t,ye]),(0,f.useEffect)((function(){P({height:"".concat(ne?U-64:U-64-39,"px")})}),[ne,U]),(0,f.useEffect)((function(){if((!t||!Object.keys(t).length)&&(ne&&a&&ae((0,b.K3)(a)),!ne&&a)){var e=function(){var e=localStorage.getItem("notes-organizer_tasks");return e?JSON.parse(e).find((function(e){return e._id===a})):{}}();ae((0,p.pL)(e))}}),[t,ae,a,ne]),(0,f.useEffect)((function(){me.length>0&&Ie("otherMembers",me.join(", ")),0===me.length&&Ie("otherMembers","")}),[me]);var Ie=function(e,t){if("dateFrom"===e){var a=m()(t,"DD.MM.YYYY");pe(a),De((function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,i.Z)({},e,t))}))}if("dateTo"===e){var r=m()(t,"DD.MM.YYYY");Ce(r),De((function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,i.Z)({},e,t))}))}De("part"===e?function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,i.Z)({},e,t.value))}:function(a){return(0,l.Z)((0,l.Z)({},a),{},(0,i.Z)({},e,t))})},Ye=function(){var e=(0,c.Z)((0,d.Z)().mark((function e(t){var a,r,n;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={part:t.part.value,subject:t.subject,dateFrom:t.dateFrom,dateTo:t.dateTo,additionalInfo:t.additionalInfo,otherMembers:we.otherMembers,saveAfterDeadline:t.saveAfterDeadline,_id:$},ne){e.next=13;break}if(r=JSON.parse(localStorage.getItem("notes-organizer_tasks")||"[]"),-1===(n=r.findIndex((function(e){return e._id===$})))){e.next=10;break}r[n]=(0,l.Z)((0,l.Z)({},r[n]),a),localStorage.setItem("notes-organizer_tasks",JSON.stringify(r)),ae((0,p.Ql)("Todo edited successfully")),e.next=11;break;case 10:return e.abrupt("return");case 11:e.next=15;break;case 13:return e.next=15,ae((0,b.bm)(a));case 15:ye((0,l.Z)({},te)),fe(!1),ve([]),pe(m()()),Ce(m()()),De(te),W(""),Ae();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){fe(!ue)},Ae=function(){var e=setTimeout((function(){re("/list")}),1e4);return function(){return clearTimeout(e)}},Ue=function(){G(!Q)};return(0,F.jsx)("section",{className:Y.editTodo,style:O,children:(0,F.jsxs)(T.Z,{children:[(0,F.jsxs)("div",{className:Y.todoPart,children:[(0,F.jsx)("div",{className:Y.edit,children:(0,F.jsxs)("form",{className:Y.form,onSubmit:Se(Ye),children:[(0,F.jsx)(s.Z,{text:"\u0420\u043e\u0437\u0434\u0456\u043b",textClass:"title-form"}),(0,F.jsx)(x.Qr,{control:Ee,name:"part",rules:{required:!0},render:function(e){var t=e.field,a=t.onChange,r=t.value;e.fieldState;return(0,F.jsx)(C.Z,{value:r,handleChange:function(e){a(e),Ie("part",e)},name:"part",className:"createTodo",placeholder:R,required:!0,options:ie,defaultValue:{value:R,label:R}})}}),(0,F.jsx)(s.Z,{text:"\u0422\u0435\u043c\u0430",textClass:"title-form"}),(0,F.jsx)(x.Qr,{control:Ee,name:"subject",rules:{required:!0},render:function(e){var t=e.field,a=t.onChange,r=t.value,n=e.fieldState;return(0,F.jsx)(M.Z,(0,l.Z)({value:r,control:Ee,className:"createTodo",handleChange:function(e){var t=e.target.value;a(t),Ie("subject",t)},error:n.error},E.X.subject))}}),(0,F.jsx)(s.Z,{text:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0447\u0430\u0442\u043a\u0443",textClass:"title-form"}),(0,F.jsx)(x.Qr,{control:Ee,name:"dateFrom",rules:{required:!0},render:function(e){var t=e.field.onChange;return(0,F.jsx)(g.Z,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:_e.toDate(),handleChange:function(e){t(e),Ie("dateFrom",e)}})}}),(0,F.jsx)(s.Z,{text:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f",textClass:"title-form"}),(0,F.jsx)(x.Qr,{control:Ee,name:"dateTo",rules:{required:!0},render:function(e){var t=e.field.onChange;return(0,F.jsx)(g.Z,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:ge.toDate(),handleChange:function(e){t(e),Ie("dateTo",e)}})}}),(0,F.jsx)(s.Z,{text:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",textClass:"title-form"}),(0,F.jsx)(x.Qr,{control:Ee,name:"additionalInfo",rules:{required:!1},render:function(e){var t=e.field,a=t.onChange,r=t.value;e.fieldState;return(0,F.jsx)("textarea",{className:"".concat(Y.textarea," ").concat(Y.scroll),value:r,onChange:function(e){a(e.target.value),Ie("additionalInfo",e.target.value)},rows:3,cols:40})}}),ne&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(s.Z,{text:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u0437 \u044f\u043a\u0438\u043c \u0432\u0438 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c",textClass:"title-form"}),(0,F.jsx)("div",{className:Y.userListShow,children:(0,F.jsx)(s.Z,{text:me.join(", "),textClass:"hidenInputCreateTodo"})}),(0,F.jsxs)("div",{className:Y.addUserGroup,children:[(0,F.jsx)("div",{className:Y.addUser,onClick:Fe,children:(0,F.jsx)(S.wEH,{size:20,color:"white"})}),(0,F.jsx)(s.Z,{text:ue?"\u041e\u0431\u0440\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432",textClass:"title-form-add-user"})]}),ue&&(0,F.jsx)("div",{className:Y.modal,children:(0,F.jsxs)("div",{className:Y.modalBorder,children:[(0,F.jsx)("button",{className:Y.dismissButton,onClick:Fe,children:(0,F.jsx)(I.G,{icon:y.NBC,size:"lg",color:"white"})}),(0,F.jsx)(w.Z,{arrayUser:se,selectedUsers:me,setSelectedUsers:ve})]})})]}),(0,F.jsx)(s.Z,{text:"\u0417\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u043f\u0456\u0441\u043b\u044f \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0440\u043c\u0456\u043d\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f",textClass:"title-form"}),(0,F.jsx)(x.Qr,{control:Ee,name:"saveAfterDeadline",render:function(e){var t=e.field,a=t.onChange,r=t.value;return(0,F.jsx)("div",{children:(0,F.jsx)("input",{type:"checkbox",className:Y.checkbox,checked:r,onChange:function(e){a(e.target.checked),Ie("saveAfterDeadline",e.target.checked)}})})}}),(0,F.jsxs)("div",{className:Y.btnPart,children:[(0,F.jsx)("div",{className:Y.wrap,children:(0,F.jsx)(k.Z,{text:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438",btnClass:"btnLight"})}),V&&(0,F.jsx)("div",{className:Y.wrap,children:(0,F.jsx)(k.Z,{text:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",btnClass:"btnLight",handleClick:Ue,type:"button"})})]})]})}),!V&&(0,F.jsx)("div",{className:Y.preview,children:(0,F.jsx)(D.Z,(0,l.Z)({},we))}),V&&Q&&(0,F.jsxs)("div",{className:Y.previewInMobile,children:[(0,F.jsx)(D.Z,(0,l.Z)({},we)),(0,F.jsx)("div",{className:Y.btnReturn,children:(0,F.jsx)(k.Z,{text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f",btnClass:"btnLight",handleClick:Ue,type:"button"})})]})]}),de&&(0,F.jsx)(N.Z,{text:"".concat(de),onDismiss:function(){var e=setTimeout((function(){ae((0,p.Wv)())}),1e4);return function(){return clearTimeout(e)}},type:"todo"})]})})},U=function(){var e=(0,r.v9)(o.t2),t=(0,n.TH)().state;return(0,F.jsxs)(F.Fragment,{children:[!e&&(0,F.jsx)(s.Z,{text:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0449\u043e\u0431 \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u0432\u0430\u0448\u0438\u0445 \u0437\u0430\u0432\u0434\u0430\u043d\u044c \u043d\u0430 \u0440\u0456\u0437\u043d\u0438\u0445 \u043f\u0440\u0438\u0441\u0442\u0440\u043e\u044f\u0445",textClass:"catalogTitle"}),(0,F.jsx)(A,{todoData:t})]})}}}]);
//# sourceMappingURL=917.a1509fb6.chunk.js.map