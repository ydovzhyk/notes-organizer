"use strict";(self.webpackChunknotes_organizer=self.webpackChunknotes_organizer||[]).push([[789],{3998:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var s=a(9456),r=a(3216),o=a(2667),d=a(1487),l=a(9379),n=a(5043),i=a(4858),c=a(6178),u=a.n(c),x=a(9945),m=a(5237),h=a(4656),j=a(8979),f=a(3503),_=a(5277),b=a(895),v=a(9610),A=a(7981),p=a(9162),g=a(7629),T=a(629),C=a(6600),M=a(5320),I=a(1934),k=a(5369),D=a(7929),S=a(3910);const N={todoPart:"EditTodo_todoPart__mI6Cn",textarea:"EditTodo_textarea__AvvZ0",scroll:"EditTodo_scroll__Gc7OP",addUserGroup:"EditTodo_addUserGroup__wBn+W",addUser:"EditTodo_addUser__a3Cq3",modal:"EditTodo_modal__VUhBN",modalBorder:"EditTodo_modalBorder__TklCT",dismissButton:"EditTodo_dismissButton__dXz+4",userListShow:"EditTodo_userListShow__41-p2",forum:"EditTodo_forum__4Asc-",preview:"EditTodo_preview__4Vha-",checkbox:"EditTodo_checkbox__g7fe+",checkboxDiv:"EditTodo_checkboxDiv__aJLli",wrap:"EditTodo_wrap__IYppw",btnPart:"EditTodo_btnPart__qNEVo",btnReturn:"EditTodo_btnReturn__aOV6E",previewInMobile:"EditTodo_previewInMobile__umgSh"};var w=a(579);const y=e=>{let{todoData:t}=e;const{id:a}=(0,r.g)(),c="DD.MM.YYYY",y=u()().format("DD.MM.YYYY"),[E,Y]=(0,n.useState)(!1),F=(0,m.useMediaQuery)({maxWidth:767}),[U,O]=(0,n.useState)(""),[q,z]=(0,n.useState)(""),B={additionalInfo:"",dateFrom:y,dateTo:y,otherMembers:"",part:"",subject:"",saveAfterDeadline:!1},P=(0,x.j)(),L=(0,r.Zp)(),G=(0,s.d4)(o.S0),V=(0,s.d4)(j._0),R=(0,s.d4)(_.xY),J=(0,s.d4)(_.Td),W=(0,s.d4)(j.UU),[Z,Q]=(0,n.useState)(!1),[X,H]=(0,n.useState)([]),[K,$]=(0,n.useState)(u()(y,c)),[ee,te]=(0,n.useState)(u()(y,c)),[ae,se]=(0,n.useState)(B),{control:re,handleSubmit:oe,reset:de}=(0,i.mN)({defaultValues:{additionalInfo:ae.additionalInfo,dateFrom:ae.dateFrom,dateTo:ae.dateTo,otherMembers:ae.otherMembers,part:{value:ae.part,label:ae.part},subject:ae.subject,saveAfterDeadline:ae.saveAfterDeadline}});(0,n.useEffect)((()=>{const e=async e=>{await se((0,l.A)({},e))};t&&Object.keys(t).length>0&&(e(t),de({additionalInfo:t.additionalInfo,dateFrom:t.dateFrom,dateTo:t.dateTo,otherMembers:t.otherMembers,part:{value:t.part,label:t.part},subject:t.subject,saveAfterDeadline:t.saveAfterDeadline}),$(u()(t.dateFrom,c)),te(u()(t.dateTo,c)),H([t.otherMembers]),O(t.part),z(t._id)),!t&&V&&Object.keys(V).length>0&&(e(V),"_id"in V&&(de({additionalInfo:V.additionalInfo,dateFrom:V.dateFrom,dateTo:V.dateTo,otherMembers:V.otherMembers,part:{value:V.part,label:V.part},subject:V.subject,saveAfterDeadline:V.saveAfterDeadline}),$(u()(V.dateFrom,c)),te(u()(V.dateTo,c)),H([V.otherMembers]),z(V._id),O(V.part)))}),[V,t,de]),(0,n.useEffect)((()=>{if((!t||!Object.keys(t).length)&&(G&&a&&P((0,h.LY)(a)),!G&&a)){const e=(()=>{const e=localStorage.getItem("notes-organizer_tasks");if(e)return JSON.parse(e).find((e=>e._id===a));return{}})();P((0,f.qI)(e))}}),[t,P,a,G]),(0,n.useEffect)((()=>{X.length>0&&le("otherMembers",X.join(", ")),0===X.length&&le("otherMembers","")}),[X]);const le=(e,t)=>{if("dateFrom"===e){const a=u()(t,"DD.MM.YYYY");$(a),se((a=>(0,l.A)((0,l.A)({},a),{},{[e]:t})))}if("dateTo"===e){const a=u()(t,"DD.MM.YYYY");te(a),se((a=>(0,l.A)((0,l.A)({},a),{},{[e]:t})))}se("part"===e?a=>(0,l.A)((0,l.A)({},a),{},{[e]:t.value}):a=>(0,l.A)((0,l.A)({},a),{},{[e]:t}))},ne=()=>{Q(!Z)},ie=()=>{const e=setTimeout((()=>{L("/list")}),1e4);return()=>clearTimeout(e)},ce=()=>{Y(!E)};return(0,w.jsx)("section",{className:N.editTodo,children:(0,w.jsxs)(b.A,{children:[(0,w.jsxs)("div",{className:N.todoPart,children:[(0,w.jsxs)("form",{className:N.form,onSubmit:oe((async e=>{const t={part:e.part.value,subject:e.subject,dateFrom:e.dateFrom,dateTo:e.dateTo,additionalInfo:e.additionalInfo,otherMembers:ae.otherMembers,saveAfterDeadline:e.saveAfterDeadline,_id:q};if(G)await P((0,h.d0)(t));else{const e=JSON.parse(localStorage.getItem("notes-organizer_tasks")||"[]"),a=e.findIndex((e=>e._id===q));if(-1===a)return;e[a]=(0,l.A)((0,l.A)({},e[a]),t),localStorage.setItem("notes-organizer_tasks",JSON.stringify(e)),P((0,f.B0)("Todo edited successfully"))}de((0,l.A)({},B)),Q(!1),H([]),$(u()()),te(u()()),se(B),O(""),ie()})),children:[(0,w.jsx)(d.A,{text:"\u0420\u043e\u0437\u0434\u0456\u043b",textClass:"title-form"}),(0,w.jsx)(i.xI,{control:re,name:"part",rules:{required:!0},render:e=>{let{field:{onChange:t,value:a},fieldState:s}=e;return(0,w.jsx)(A.A,{value:a,handleChange:e=>{t(e),le("part",e)},name:"part",className:"createTodo",placeholder:U,required:!0,options:J,defaultValue:{value:U,label:U}})}}),(0,w.jsx)(d.A,{text:"\u0422\u0435\u043c\u0430",textClass:"title-form"}),(0,w.jsx)(i.xI,{control:re,name:"subject",rules:{required:!0},render:e=>{let{field:{onChange:t,value:a},fieldState:s}=e;return(0,w.jsx)(g.A,(0,l.A)({value:a,control:re,className:"createTodo",handleChange:e=>{const a=e.target.value;t(a),le("subject",a)},error:s.error},I.O.subject))}}),(0,w.jsx)(d.A,{text:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0447\u0430\u0442\u043a\u0443",textClass:"title-form"}),(0,w.jsx)(i.xI,{control:re,name:"dateFrom",rules:{required:!0},render:e=>{let{field:{onChange:t}}=e;return(0,w.jsx)(v.A,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:K.toDate(),handleChange:e=>{t(e),le("dateFrom",e)}})}}),(0,w.jsx)(d.A,{text:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f",textClass:"title-form"}),(0,w.jsx)(i.xI,{control:re,name:"dateTo",rules:{required:!0},render:e=>{let{field:{onChange:t}}=e;return(0,w.jsx)(v.A,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:ee.toDate(),handleChange:e=>{t(e),le("dateTo",e)}})}}),(0,w.jsx)(d.A,{text:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",textClass:"title-form"}),(0,w.jsx)(i.xI,{control:re,name:"additionalInfo",rules:{required:!1},render:e=>{let{field:{onChange:t,value:a},fieldState:s}=e;return(0,w.jsx)("textarea",{className:"".concat(N.textarea," ").concat(N.scroll),value:a,onChange:e=>{t(e.target.value),le("additionalInfo",e.target.value)},rows:3,cols:40})}}),G&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.A,{text:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u0437 \u044f\u043a\u0438\u043c \u0432\u0438 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c",textClass:"title-form"}),(0,w.jsx)("div",{className:N.userListShow,children:(0,w.jsx)(d.A,{text:X.join(", "),textClass:"hidenInputCreateTodo"})}),(0,w.jsxs)("div",{className:N.addUserGroup,children:[(0,w.jsx)("div",{className:N.addUser,onClick:ne,children:(0,w.jsx)(k.OiG,{size:20,color:"white"})}),(0,w.jsx)(d.A,{text:Z?"\u041e\u0431\u0440\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432",textClass:"title-form-add-user"})]}),Z&&(0,w.jsx)("div",{className:N.modal,children:(0,w.jsxs)("div",{className:N.modalBorder,children:[(0,w.jsx)("button",{className:N.dismissButton,onClick:ne,children:(0,w.jsx)(S.g,{icon:D.GRI,size:"lg",color:"white"})}),(0,w.jsx)(T.A,{arrayUser:R,selectedUsers:X,setSelectedUsers:H})]})})]}),(0,w.jsx)(d.A,{text:"\u0417\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u043f\u0456\u0441\u043b\u044f \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0440\u043c\u0456\u043d\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f",textClass:"title-form"}),(0,w.jsx)(i.xI,{control:re,name:"saveAfterDeadline",render:e=>{let{field:{onChange:t,value:a}}=e;return(0,w.jsx)("div",{children:(0,w.jsx)("input",{type:"checkbox",className:N.checkbox,checked:a,onChange:e=>{t(e.target.checked),le("saveAfterDeadline",e.target.checked)}})})}}),(0,w.jsxs)("div",{className:N.btnPart,children:[(0,w.jsx)("div",{className:N.wrap,children:(0,w.jsx)(p.A,{text:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438",btnClass:"btnLight"})}),F&&(0,w.jsx)("div",{className:N.wrap,children:(0,w.jsx)(p.A,{text:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",btnClass:"btnLight",handleClick:ce,type:"button"})})]})]}),!F&&(0,w.jsx)("div",{className:N.preview,children:(0,w.jsx)(C.A,(0,l.A)({},ae))}),F&&E&&(0,w.jsxs)("div",{className:N.previewInMobile,children:[(0,w.jsx)(C.A,(0,l.A)({},ae)),(0,w.jsx)("div",{className:N.btnReturn,children:(0,w.jsx)(p.A,{text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f",btnClass:"btnLight",handleClick:ce,type:"button"})})]})]}),W&&(0,w.jsx)(M.A,{text:"".concat(W),onDismiss:()=>{const e=setTimeout((()=>{P((0,f.R)())}),1e4);return()=>clearTimeout(e)},type:"todo"})]})})},E=()=>{const e=(0,s.d4)(o.S0),t=(0,r.zy)().state;return(0,w.jsxs)(w.Fragment,{children:[!e&&(0,w.jsx)(d.A,{text:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0449\u043e\u0431 \u043e\u0442\u0440\u0438\u043c\u0430\u0442\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u0434\u043e \u0432\u0430\u0448\u0438\u0445 \u0437\u0430\u0432\u0434\u0430\u043d\u044c \u043d\u0430 \u0440\u0456\u0437\u043d\u0438\u0445 \u043f\u0440\u0438\u0441\u0442\u0440\u043e\u044f\u0445",textClass:"catalogTitle"}),(0,w.jsx)(y,{todoData:t})]})}}}]);
//# sourceMappingURL=789.07a19312.chunk.js.map