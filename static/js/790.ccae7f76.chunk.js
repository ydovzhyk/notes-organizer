"use strict";(self.webpackChunknotes_organizer=self.webpackChunknotes_organizer||[]).push([[790],{2883:function(e,t,r){r.d(t,{I:function(){return o}});var a=r(2426),n=r.n(a),o=function(e){var t,r=null===(t=e.searchByPhrase)||void 0===t?void 0:t.toLowerCase(),a=localStorage.getItem("notes-organizer_tasks"),o=n()();if(a){var s=JSON.parse(a).filter((function(t){return!(e.searchByDate&&!function(e,t,r){var a=n()(e,"DD.MM.YYYY",!0),o=n()(t,"DD.MM.YYYY",!0),s=n()(r,"DD.MM.YYYY",!0);return a.isBetween(o,s,null,"[]")}(e.searchByDate,t.dateFrom,t.dateTo))&&((!e.searchByPart||t.part===e.searchByPart)&&(!(r&&!(t.subject.toLowerCase().includes(r)||t.additionalInfo&&t.additionalInfo.toLowerCase().includes(r)))&&(("\u0422\u0435\u0440\u043c\u0456\u043d \u0437\u0430\u043a\u0456\u043d\u0447\u0438\u0432\u0441\u044f"!==e.searchByStatus||!n()(o,"DD.MM.YYYY",!0).isBefore(n()(t.dateTo,"DD.MM.YYYY",!0)))&&("\u0412\u0438\u043a\u043e\u043d\u0443\u0454\u0442\u044c\u0441\u044f"!==e.searchByStatus||!n()(o,"DD.MM.YYYY",!0).isAfter(n()(t.dateTo,"DD.MM.YYYY",!0))))))}));return s.length>0?s:[]}}},6953:function(e,t,r){r.r(t),r.d(t,{default:function(){return z}});var a=r(4942),n=r(1413),o=r(4165),s=r(5861),i=r(9439),c=r(2791),d=r(9434),l=r(1134),u=r(4805),x=r(2426),f=r.n(x),h=r(1313),m=r(2883),v=r(5365),j=r(8373),_=r(5725),Z=r(8149),p=r(7724),C=r(3450),b=r(4657),g=r(5347),T=r(2435),Y=r(1351),k=r(1716),w=r(7787),M=r(6267),y=r(4989),D=r(8110),S=r(6355),N=r(1632),I=r(9806),B={createTodo:"CreateTodo_createTodo__0bag4",todoPart:"CreateTodo_todoPart__M-oVy",textarea:"CreateTodo_textarea__tkAlx",scroll:"CreateTodo_scroll__4Mlw0",addUserGroup:"CreateTodo_addUserGroup__o615u",addUser:"CreateTodo_addUser__KGkLd",modal:"CreateTodo_modal__eEXkl",modalBorder:"CreateTodo_modalBorder__e8VLb",dismissButton:"CreateTodo_dismissButton__Z0cPA",userListShow:"CreateTodo_userListShow__mST2H",create:"CreateTodo_create__og1pO",preview:"CreateTodo_preview__Hm0uN",previewInMobile:"CreateTodo_previewInMobile__3u08V",checkbox:"CreateTodo_checkbox__FY4EB",checkboxDiv:"CreateTodo_checkboxDiv__jW9ib",wrap:"CreateTodo_wrap__Fc8nQ",btnPart:"CreateTodo_btnPart__Tfiw4",btnReturn:"CreateTodo_btnReturn__uVadC"},F=r(3329),P=function(){var e=window.innerHeight,t=(0,c.useState)({}),r=(0,i.Z)(t,2),x=r[0],P=r[1],z=(0,h.T)(),L=(0,d.v9)(j.t2),Q=(0,d.v9)(p.x0),U=(0,d.v9)(p.G8),A=(0,d.v9)(_.es),E=(0,d.v9)(_.ZU),q=(0,c.useState)(!1),G=(0,i.Z)(q,2),V=G[0],J=G[1],O=(0,c.useState)([]),H=(0,i.Z)(O,2),W=H[0],R=H[1],X=(0,c.useState)(f()()),K=(0,i.Z)(X,2),$=K[0],ee=K[1],te=(0,c.useState)(f()()),re=(0,i.Z)(te,2),ae=re[0],ne=re[1],oe={additionalInfo:"",dateFrom:"",dateTo:"",otherMembers:"",part:"",subject:"",saveAfterDeadline:!1},se=(0,c.useState)(oe),ie=(0,i.Z)(se,2),ce=ie[0],de=ie[1],le=(0,c.useState)(!1),ue=(0,i.Z)(le,2),xe=ue[0],fe=ue[1],he=(0,c.useState)([]),me=(0,i.Z)(he,2),ve=me[0],je=me[1],_e=(0,u.useMediaQuery)({maxWidth:767});(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L){e.next=9;break}if(t={searchByStatus:""},!((r=(0,m.I)(t))&&r.length>0)){e.next=9;break}return je(r),e.next=7,z((0,Z.zE)(!0));case 7:return e.next=9,z((0,Z.Ql)("You have tasks saved locally on your computer, would you like to synchronize them with the server?"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[L,z]),(0,c.useEffect)((function(){W.length>0&&Ze("otherMembers",W.join(", ")),0===W.length&&Ze("otherMembers","")}),[W]),(0,c.useEffect)((function(){P({height:"".concat(e-64,"px")})}),[L,e]);var Ze=function(e,t){if("dateFrom"===e){var r=f()(t,"DD.MM.YYYY");ee(r),de((function(r){return(0,n.Z)((0,n.Z)({},r),{},(0,a.Z)({},e,t))}))}if("dateTo"===e){var o=f()(t,"DD.MM.YYYY");ne(o),de((function(r){return(0,n.Z)((0,n.Z)({},r),{},(0,a.Z)({},e,t))}))}de("part"===e?function(r){return(0,n.Z)((0,n.Z)({},r),{},(0,a.Z)({},e,t.value))}:function(r){return(0,n.Z)((0,n.Z)({},r),{},(0,a.Z)({},e,t))})},pe=(0,l.cI)({defaultValues:{part:{value:"",label:""},subject:"",dateFrom:"",dateTo:"",additionalInfo:"",saveAfterDeadline:!1}}),Ce=pe.control,be=pe.handleSubmit,ge=pe.reset;var Te=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={part:t.part.value,subject:t.subject,dateFrom:t.dateFrom,dateTo:t.dateTo,additionalInfo:t.additionalInfo,otherMembers:ce.otherMembers,saveAfterDeadline:t.saveAfterDeadline},L){e.next=8;break}(a=JSON.parse(localStorage.getItem("notes-organizer_tasks")||"[]")).push((0,n.Z)((0,n.Z)({},r),{},{_id:((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}))})),localStorage.setItem("notes-organizer_tasks",JSON.stringify(a)),z((0,Z.Ql)("Todo added successfully")),e.next=10;break;case 8:return e.next=10,z((0,v.JV)(r));case 10:ge(),J(!1),R([]),ee(f()()),ne(f()()),de(oe);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){J(!V)},ke=function(){fe(!xe)},we=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=7;break}return e.next=3,z((0,v.nm)(ve));case 3:(r=e.sent)&&"fulfilled"===r.meta.requestStatus&&(localStorage.setItem("notes-organizer_tasks",JSON.stringify([])),je([])),e.next=9;break;case 7:z((0,Z.Wv)()),z((0,Z.zE)(!1));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsx)("section",{className:B.createTodo,style:x,children:(0,F.jsxs)(C.Z,{children:[(0,F.jsxs)("div",{className:B.todoPart,children:[(0,F.jsx)("div",{className:B.create,children:(0,F.jsxs)("form",{className:B.form,onSubmit:be(Te),children:[(0,F.jsx)(Y.Z,{text:"\u0420\u043e\u0437\u0434\u0456\u043b",textClass:"title-form"}),(0,F.jsx)(l.Qr,{control:Ce,name:"part",rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,a=t.value;e.fieldState;return(0,F.jsx)(g.Z,{value:a,handleChange:function(e){r(e),Ze("part",e)},name:"part",className:"createTodo",placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043e\u043f\u0446\u0456\u044e",required:!0,options:U})}}),(0,F.jsx)(Y.Z,{text:"\u0422\u0435\u043c\u0430",textClass:"title-form"}),(0,F.jsx)(l.Qr,{control:Ce,name:"subject",rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,a=t.value,o=e.fieldState;return(0,F.jsx)(k.Z,(0,n.Z)({value:a,control:Ce,className:"createTodo",handleChange:function(e){var t=e.target.value;r(t),Ze("subject",t)},error:o.error},D.X.subject))}}),(0,F.jsx)(Y.Z,{text:"\u0414\u0430\u0442\u0430 \u043f\u043e\u0447\u0430\u0442\u043a\u0443",textClass:"title-form"}),(0,F.jsx)(l.Qr,{control:Ce,name:"dateFrom",rules:{required:!0},render:function(e){var t=e.field.onChange;return(0,F.jsx)(b.Z,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:$.toDate(),handleChange:function(e){t(e),Ze("dateFrom",e)}})}}),(0,F.jsx)(Y.Z,{text:"\u0414\u0430\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f",textClass:"title-form"}),(0,F.jsx)(l.Qr,{control:Ce,name:"dateTo",rules:{required:!0},render:function(e){var t=e.field.onChange;return(0,F.jsx)(b.Z,{dateFormat:"dd.MM.yyyy",showMonthYearPicker:!1,value:ae.toDate(),handleChange:function(e){t(e),Ze("dateTo",e)}})}}),(0,F.jsx)(Y.Z,{text:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",textClass:"title-form"}),(0,F.jsx)(l.Qr,{control:Ce,name:"additionalInfo",rules:{required:!1},render:function(e){var t=e.field,r=t.onChange,a=t.value;e.fieldState;return(0,F.jsx)("textarea",{className:"".concat(B.textarea," ").concat(B.scroll),value:a,onChange:function(e){r(e.target.value),Ze("additionalInfo",e.target.value)},rows:3,cols:40})}}),L&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y.Z,{text:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456 \u0437 \u044f\u043a\u0438\u043c \u0432\u0438 \u0445\u043e\u0447\u0435\u0442\u0435 \u043f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044f \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f\u043c",textClass:"title-form"}),(0,F.jsx)("div",{className:B.userListShow,children:(0,F.jsx)(Y.Z,{text:W.join(", "),textClass:"hidenInputCreateTodo"})}),(0,F.jsxs)("div",{className:B.addUserGroup,children:[(0,F.jsx)("div",{className:B.addUser,onClick:Ye,children:(0,F.jsx)(S.wEH,{size:20,color:"white"})}),(0,F.jsx)(Y.Z,{text:V?"\u041e\u0431\u0440\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432",textClass:"title-form-add-user"})]}),V&&(0,F.jsx)("div",{className:B.modal,children:(0,F.jsxs)("div",{className:B.modalBorder,children:[(0,F.jsx)("button",{className:B.dismissButton,onClick:Ye,children:(0,F.jsx)(I.G,{icon:N.NBC,size:"lg",color:"white"})}),(0,F.jsx)(w.Z,{arrayUser:Q,selectedUsers:W,setSelectedUsers:R})]})})]}),(0,F.jsx)(Y.Z,{text:"\u0417\u0431\u0435\u0440\u0456\u0433\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f \u043f\u0456\u0441\u043b\u044f \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0440\u043c\u0456\u043d\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f",textClass:"title-form"}),(0,F.jsx)(l.Qr,{control:Ce,name:"saveAfterDeadline",render:function(e){var t=e.field,r=t.onChange,a=t.value;return(0,F.jsx)("div",{className:B.checkboxDiv,children:(0,F.jsx)("input",{type:"checkbox",className:B.checkbox,checked:a,onChange:function(e){r(e.target.checked),Ze("saveAfterDeadline",e.target.checked)}})})}}),(0,F.jsxs)("div",{className:B.btnPart,children:[(0,F.jsx)("div",{className:B.wrap,children:(0,F.jsx)(T.Z,{text:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",btnClass:"btnLight"})}),_e&&(0,F.jsx)("div",{className:B.wrap,children:(0,F.jsx)(T.Z,{text:"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",btnClass:"btnLight",handleClick:ke,type:"button"})})]})]})}),!_e&&(0,F.jsx)("div",{className:B.preview,children:(0,F.jsx)(M.Z,(0,n.Z)({},ce))}),_e&&xe&&(0,F.jsxs)("div",{className:B.previewInMobile,children:[(0,F.jsx)(M.Z,(0,n.Z)({},ce)),(0,F.jsx)("div",{className:B.btnReturn,children:(0,F.jsx)(T.Z,{text:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f",btnClass:"btnLight",handleClick:ke,type:"button"})})]})]}),A&&(0,F.jsx)(y.Z,{text:"".concat(A),onDismiss:function(){if(!E){var e=setTimeout((function(){z((0,Z.Wv)())}),1e4);return function(){return clearTimeout(e)}}},onChoice:we,type:"todo"})]})})},z=function(){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)(P,{})})}}}]);
//# sourceMappingURL=790.ccae7f76.chunk.js.map